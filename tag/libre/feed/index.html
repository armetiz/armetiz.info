<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Armetiz &#187; Libre</title>
	<atom:link href="http://www.armetiz.info/tag/libre/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.armetiz.info</link>
	<description>Thomas Tourlourat - Ingénieur Informatique, CEO @Wozbe.com</description>
	<lastBuildDate>Mon, 01 Dec 2014 09:47:14 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.2.2</generator>
	<item>
		<title>Beanstalkd &#8211; Job Queuing</title>
		<link>http://www.armetiz.info/beanstalkd-service-job-queuing/</link>
		<comments>http://www.armetiz.info/beanstalkd-service-job-queuing/#comments</comments>
		<pubDate>Wed, 10 Jul 2013 06:00:05 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[Réseau]]></category>
		<category><![CDATA[Asynchrone]]></category>
		<category><![CDATA[Beanstalkd]]></category>
		<category><![CDATA[IO]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Message]]></category>
		<category><![CDATA[NodeJS]]></category>
		<category><![CDATA[RabbitMQ]]></category>
		<category><![CDATA[ZeroMQ]]></category>

		<guid isPermaLink="false">http://hosting.armetiz.info/armetiz/?p=2716</guid>
		<description><![CDATA[Beanstalkd est un service de Job Queuing efficace et surtout simple que je souhaite vous présentez depuis un long moment. Pour rappel, les systèmes de Job Queuing sont utilisés sur.. <a href="http://www.armetiz.info/beanstalkd-service-job-queuing/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p><a href="http://kr.github.io/beanstalkd/">Beanstalkd</a> est un service de <a href="http://en.wikipedia.org/wiki/Job_queue">Job Queuing</a> <strong>efficace et surtout simple</strong> que je souhaite vous présentez depuis un long moment.</p>
<p>Pour rappel, les systèmes de Job Queuing sont utilisés sur des traitements type <strong>Producteur-Consommateur asynchrone</strong>, ils permettent une évolution horizontale de vos projets.</p>
<p>Des services réseaux comme <a href="http://kr.github.io/beanstalkd/">Beanstalkd</a>, <a href="http://www.rabbitmq.com/">RabbitMQ</a> ou <a href="http://www.zeromq.org/">ZeroMQ</a> simplifient le transfert de message entre différents serveurs, d&#8217;où l&#8217;évolution horizontale.</p>
<p>On différencie <strong>Beanstalkd</strong> de ses concurrents par la simplicité d&#8217;utilisation et d&#8217;administration.<br />
Par exemple, <a href="http://www.rabbitmq.com/">RabbitMQ</a> est un outil de <strong>Message Queuing</strong> très complet mais dont la mise en place, l&#8217;utilisation et l&#8217;administration sont plus difficiles. <a href="http://www.zeromq.org/">ZeroMQ</a> est un protocole Socket à faible latence, il s&#8217;agit d&#8217;un Framework plus que d&#8217;un <strong>service d&#8217;entreprise</strong>.</p>
<p><strong>Beanstalkd</strong> en plus de sa simplicité, dispose d&#8217;autres avantages :</p>
<ul>
<li>Des clients dans de <a href="https://github.com/kr/beanstalkd/wiki/Client-Libraries">nombreux languages</a></li>
<li>Système de Tubes</li>
<li>Rapide et peu consommateur de cycle CPU</li>
<li>Persistance des messages</li>
<li>Et bien d&#8217;autres&#8230;</li>
</ul>
<p>Pour les utilisateurs PHP,<br />
Vous pouvez utiliser directement la librairie <a href="https://github.com/pda/pheanstalk/">pda/peanstalk</a>.<br />
Si vous êtes développeur <strong>Symfony 2</strong>, <a href="https://github.com/armetiz/LeezyPheanstalkBundle">LeezyPheanstalkBundle</a> fournit une intégration de la librairie ainsi que differentes fonctions liées à Symfony :</p>
<ul>
<li>Interface Ligne de Commande &#8211; CLI &#8211; pour gérer les Tubes &#038; Messages.</li>
<li>Une intégration au <a href="http://symfony.com/doc/current/components/event_dispatcher/introduction.html">système d&#8217;évenement Symfony</a>.</li>
<li>Une intégration au <a href="http://symfony.com/doc/current/book/internals.html#profiler">Profiler de Symfony</a> pour analyser vos serveurs Beanstalkd.</li>
<li>Une intégration au système de <a href="http://symfony.com/doc/master/cookbook/logging/monolog.html">Journalisation monolog de Symfony.</a></li>
</ul>
<p>Si vous voulez poursuivre un peu vos lectures sur Beanstalk, voici quelques liens en Anglais : <a href="http://www.quora.com/Beanstalk-work-queue/What-are-the-advantages-and-disadvantages-of-Beanstalkd-as-a-work-queue">Les avantages et désavantages de Beanstalkd</a>, <a href="http://dev.af83.com/2013/03/13/why-you-should-consider-beanstalkd.html">Pourquoi devez-vous étudier Beanstalkd</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/beanstalkd-service-job-queuing/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Désactiver le WiFi de la Freebox à certaines heures</title>
		<link>http://www.armetiz.info/desactiver-wifi-freebox-sdk/</link>
		<comments>http://www.armetiz.info/desactiver-wifi-freebox-sdk/#comments</comments>
		<pubDate>Tue, 09 Oct 2012 06:53:12 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Cron]]></category>
		<category><![CDATA[Domotique]]></category>
		<category><![CDATA[Freebox]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[NodeJS]]></category>
		<category><![CDATA[npm]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[Projet]]></category>
		<category><![CDATA[SDK]]></category>

		<guid isPermaLink="false">http://hosting.armetiz.info/armetiz/?p=2745</guid>
		<description><![CDATA[Je viens de sortir un SDK &#8211; short edition &#8211; sous NodeJS pour la Freebox: node-freebox-sdk. Actuellement, il n&#8217;y a que la gestion du wifi de disponible. Mon objectif étant.. <a href="http://www.armetiz.info/desactiver-wifi-freebox-sdk/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>Je viens de sortir un SDK &#8211; short edition &#8211; sous NodeJS pour la Freebox: <a href="https://github.com/armetiz/node-freebox-sdk">node-freebox-sdk</a>.</p>
<p>Actuellement, il n&#8217;y a que la gestion du wifi de disponible.<br />
Mon objectif étant de pouvoir <strong>activer / désactiver le WiFi</strong> de notre domicile à certaines heures.</p>
<p>Sur <a href="http://linuxfr.org/forums/programmationshell/posts/activerd%C3%A9sactiver-le-wifi-dune-freebox-v6-depuis-le-r%C3%A9seau-local">linuxfr.org</a> &#8211; 404 : Copier sur Github : <a href="https://github.com/armetiz/bash-freebox-wifi-manager/blob/master/freebox_wifi.sh">bash-freebox-wifi-manager</a> &#8211; , quelqu&#8217;un a rendu disponible une solution pour faire cela en utilisant le shell &#038; curl.<br />
Cette solution fonctionne très bien, mais je souhaitais développer un peu avec <a href="http://nodejs.org/">NodeJS</a>.</p>
<p>Voyons comment mettre en place la solution NodeJS avec une <a href="http://fr.wikipedia.org/wiki/Crontab">tâche planifiée</a>.</p>
<p>Nous allons commencer par installer le SDK Freebox via npm.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">npm <span style="color: #c20cb9; font-weight: bold;">install</span> freebox-sdk</div></td></tr></tbody></table></div>
<p>Ensuite, nous allons créer l&#8217;application <strong>/home/john.doe/freebox-wifi-manager</strong></p>
<div class="codecolorer-container javascript blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br /></div></td><td><div class="javascript codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #003366; font-weight: bold;">var</span> Freebox <span style="color: #339933;">=</span> require<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;freebox-sdk&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #003366; font-weight: bold;">var</span> freebox <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> Freebox<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; password<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; wifiChannel<span style="color: #339933;">:</span> <span style="color: #CC0000;">11</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; wifiHtMode<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;disabled&quot;</span> &nbsp;<span style="color: #006600; font-style: italic;">//disabled, 20, 40_lower, 40_upper</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #003366; font-weight: bold;">var</span> command <span style="color: #339933;">=</span> process.<span style="color: #660066;">argv</span><span style="color: #009900;">&#91;</span><span style="color: #CC0000;">2</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
freebox.<span style="color: #660066;">on</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;connect&quot;</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">switch</span> <span style="color: #009900;">&#40;</span>command<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">case</span> <span style="color: #3366CC;">&quot;wifi:on&quot;</span> <span style="color: #339933;">:</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; freebox.<span style="color: #660066;">wifiOn</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;wifi is on&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">break</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">case</span> <span style="color: #3366CC;">&quot;wifi:off&quot;</span> <span style="color: #339933;">:</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; freebox.<span style="color: #660066;">wifiOff</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;wifi is off&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">break</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">case</span> <span style="color: #3366CC;">&quot;wifi:status&quot;</span> <span style="color: #339933;">:</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; freebox.<span style="color: #660066;">wifiStatus</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #000066;">status</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;wifi is &quot;</span> <span style="color: #339933;">+</span> <span style="color: #009900;">&#40;</span><span style="color: #000066;">status</span>.<span style="color: #660066;">active</span> <span style="color: #339933;">?</span> <span style="color: #3366CC;">&quot;on&quot;</span> <span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;off&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">break</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #003366; font-weight: bold;">default</span><span style="color: #339933;">:</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;command unknown&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
freebox.<span style="color: #660066;">on</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;error&quot;</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>message<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;error: &quot;</span> <span style="color: #339933;">+</span> message<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
freebox.<span style="color: #660066;">connect</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></td></tr></tbody></table></div>
<p>Vous pouvez tester si cela fonctionne</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">chmod</span> +x <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager<br />
node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager wifi:on<br />
node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager wifi:status<br />
node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager wifi:off<br />
node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager wifi:status</div></td></tr></tbody></table></div>
<p>Pour finir,<br />
Mise en place du <a href="http://fr.wikipedia.org/wiki/Crontab">crontab</a> qui permet d&#8217;allumer le WiFi en semaine de 7h à 9h, de 17h à 00h et le weekend. Le reste du temps, le WiFi sera désactivé.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;"># m h &nbsp;dom mon dow &nbsp; command</span><br />
<span style="color: #000000;">0</span> <span style="color: #000000;">7</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000;">1</span>-<span style="color: #000000;">6</span> node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager on<br />
<span style="color: #000000;">0</span> <span style="color: #000000;">9</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000;">1</span>-<span style="color: #000000;">5</span> node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager off<br />
<span style="color: #000000;">0</span> <span style="color: #000000;">17</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000;">1</span>-<span style="color: #000000;">5</span> node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager on<br />
<span style="color: #000000;">0</span> <span style="color: #000000;">0</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000;">0</span>-<span style="color: #000000;">5</span> node <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>john.doe<span style="color: #000000; font-weight: bold;">/</span>freebox-wifi-manager off</div></td></tr></tbody></table></div>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/desactiver-wifi-freebox-sdk/feed/</wfw:commentRss>
		<slash:comments>28</slash:comments>
		</item>
		<item>
		<title>NodeJS &#8211; Mise en production</title>
		<link>http://www.armetiz.info/node-js-mise-production-simple/</link>
		<comments>http://www.armetiz.info/node-js-mise-production-simple/#comments</comments>
		<pubDate>Tue, 11 Sep 2012 10:07:39 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Système]]></category>
		<category><![CDATA[CentOS]]></category>
		<category><![CDATA[Debian]]></category>
		<category><![CDATA[Déploiement]]></category>
		<category><![CDATA[Didacticiel]]></category>
		<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Linux]]></category>
		<category><![CDATA[MEP]]></category>
		<category><![CDATA[NodeJS]]></category>
		<category><![CDATA[Production]]></category>
		<category><![CDATA[Tutoriel]]></category>
		<category><![CDATA[Ubuntu]]></category>

		<guid isPermaLink="false">http://hosting.armetiz.info/armetiz/?p=2748</guid>
		<description><![CDATA[La mise en production d&#8217;une application NodeJS est une étape importante dans la vie de votre application. Il existe de nombreuses solutions utilisant forever, upstart, monit ou le script shell.. <a href="http://www.armetiz.info/node-js-mise-production-simple/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>La mise en production d&#8217;une application <a href="http://nodejs.org/">NodeJS</a> est une étape importante dans la vie de votre application.</p>
<p>Il existe de nombreuses solutions utilisant <a href="https://github.com/nodejitsu/forever">forever</a>, <a href="http://upstart.ubuntu.com/">upstart</a>, <a href="http://mmonit.com/monit/">monit</a> ou le script shell <a href="http://fr.wikipedia.org/wiki/Linux_Standard_Base">LSB</a> personnalisé.<br />
Aucune de ces solutions ne m&#8217;a convaincu; du coup la solution que je vous propose est la mise en place d&#8217;un script LSB fait en <strong>Javascript</strong>.</p>
<h3>Pré-requit</h3>
<p>Pour réaliser correctement ce petit tutoriel, il faut :</p>
<ul>
<li>Un utilisateur système &#8220;node&#8221; avec son répertoire personnel: <strong>adduser &#8211;shell /sbin/nologin node</strong></li>
<li><a href="http://www.armetiz.info/install-nodejs-on-centos/">NodeJS installé</a></li>
<li>Installer <strong><a href="http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/">globalement</a></strong> le module <a href="https://npmjs.org/package/simple-daemon">simple-daemon</a> : <strong>npm install -g simple-daemon</strong>
</ul>
<h3>Exemple d&#8217;application</h3>
<p>L&#8217;application que nous souhaitons lancer automatiquement au démarrage du serveur est un simple serveur HTTP.</p>
<p><strong>/home/node/funky-server/funky-server.js</strong></p>
<div class="codecolorer-container javascript blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="javascript codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #003366; font-weight: bold;">var</span> http <span style="color: #339933;">=</span> require<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'http'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
http.<span style="color: #660066;">createServer</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>req<span style="color: #339933;">,</span> res<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'New client'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; res.<span style="color: #660066;">writeHead</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">200</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span><span style="color: #3366CC;">'Content-Type'</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">'text/plain'</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; res.<span style="color: #660066;">end</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'Hello Funky World<span style="color: #000099; font-weight: bold;">\n</span>'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">listen</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">80</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'Server running, listen on port 80'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></td></tr></tbody></table></div>
<p>Cette application a de particulier qu&#8217;elle écoute toujours sur le port 80 et donc qu&#8217;une seule instance ne peut-être exécutée.<br />
De plus, pour ouvrir un socket sur un port inférieur à 1024, il faut les privileges root.<br />
Une fois le serveur sur écoute, les privileges <strong>root</strong> ne sont plus nécessaires.</p>
<h3>Déploiement</h3>
<p>Vous remarquerez qu&#8217;au sein de l&#8217;application, il n&#8217;y a aucune gestion de l&#8217;utilisateur gérant le processus ou de vérification de l&#8217;unicité de l&#8217;execution.<br />
Cela sera géré directement par notre <strong>Wrapper</strong> LSB dont voici le contenu.</p>
<p><strong>/etc/init.d/funky-server.js</strong></p>
<div class="codecolorer-container javascript blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="javascript codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">#<span style="color: #339933;">!/</span>usr<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>env node<br />
<span style="color: #003366; font-weight: bold;">var</span> daemon <span style="color: #339933;">=</span> require<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'/usr/local/lib/node_modules/simple-daemon'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #006600; font-style: italic;">//En fonction de votre système, ce chemin peut-être different</span><br />
<br />
daemon.<span style="color: #660066;">simple</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; pidfile <span style="color: #339933;">:</span> <span style="color: #3366CC;">'/var/run/funky-server.pid'</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; logfile <span style="color: #339933;">:</span> <span style="color: #3366CC;">'/var/log/funky-server.log'</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; command <span style="color: #339933;">:</span> process.<span style="color: #660066;">argv</span><span style="color: #009900;">&#91;</span><span style="color: #CC0000;">3</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; runSync &nbsp; &nbsp; <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; require <span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;/home/node/funky-server/funky-server.js&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; process.<span style="color: #660066;">setuid</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;node&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></td></tr></tbody></table></div>
<p>Comme vous le remarquez, une fois le require fait, nous changeons l&#8217;utilisateur du processus.</p>
<p>Rendons le fichier executable.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">chmod</span> +x <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>funky-server.js</div></td></tr></tbody></table></div>
<p>Vous pouvez tester</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>funky-server.js start<br />
<span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>funky-server.js status<br />
<br />
curl <span style="color: #660033;">-o</span> <span style="color: #000000; font-weight: bold;">/</span>dev<span style="color: #000000; font-weight: bold;">/</span>null http:<span style="color: #000000; font-weight: bold;">//</span>localhost<span style="color: #000000; font-weight: bold;">/</span><br />
<span style="color: #c20cb9; font-weight: bold;">tail</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>log<span style="color: #000000; font-weight: bold;">/</span>funky-server.log<br />
<br />
<span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>funky-server.js stop<br />
<span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>funky-server.js status</div></td></tr></tbody></table></div>
<p>Pour ajouter le Wrapper ci-dessus aux scripts de demarrage système, il est préférable de le rendre compatible à votre distribution.</p>
<p>Sous Linux, il faut rajouter des headers pour être conforme <a href="http://fedoraproject.org/wiki/Packaging:SysVInitScript">SysVInitScript</a> / <a href="http://wiki.debian.org/LSBInitScripts">LSBinitScript Debian</a></p>
<p>Voici le code complet du script de démarrage.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;">#!/usr/bin/env node</span><br />
<span style="color: #666666; font-style: italic;">### BEGIN INIT INFO</span><br />
<span style="color: #666666; font-style: italic;"># Provides: funky-server</span><br />
<span style="color: #666666; font-style: italic;"># Required-Start: $local_fs $network $syslog</span><br />
<span style="color: #666666; font-style: italic;"># Required-Stop: $local_fs $network $syslog</span><br />
<span style="color: #666666; font-style: italic;"># Default-Start: 2 3 4 5</span><br />
<span style="color: #666666; font-style: italic;"># Default-Stop: 0 1 6</span><br />
<span style="color: #666666; font-style: italic;"># Short-Description: Start daemon at boot time</span><br />
<span style="color: #666666; font-style: italic;"># Description: Enable service provided by funky-server.</span><br />
<span style="color: #666666; font-style: italic;">### END INIT INFO</span><br />
<br />
var daemon = require<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">'/usr/local/lib/node_modules/simple-daemon'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>; <br />
<span style="color: #000000; font-weight: bold;">//</span>En fonction de votre système, ce chemin peut-être different<br />
<br />
daemon.simple<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#123;</span><br />
&nbsp; &nbsp; pidfile : <span style="color: #ff0000;">'/var/run/funky-server.pid'</span>,<br />
&nbsp; &nbsp; logfile : <span style="color: #ff0000;">'/var/log/funky-server.log'</span>,<br />
&nbsp; &nbsp; <span style="color: #7a0874; font-weight: bold;">command</span> : process.argv<span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #000000;">3</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>,<br />
&nbsp; &nbsp; runSync &nbsp; &nbsp; : <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; require <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">&quot;/home/node/funky-server/funky-server.js&quot;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; process.setuid<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">&quot;node&quot;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #7a0874; font-weight: bold;">&#125;</span><br />
<span style="color: #7a0874; font-weight: bold;">&#125;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>;</div></td></tr></tbody></table></div>
<p>Sous Debian &#038; Ubuntu, rajouter les headers suivant pour etre conforme :</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;">#!/usr/bin/env node</span><br />
<span style="color: #666666; font-style: italic;">### BEGIN INIT INFO</span><br />
<span style="color: #666666; font-style: italic;"># Provides: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;funky-server</span><br />
<span style="color: #666666; font-style: italic;"># Required-Start: &nbsp; &nbsp;$local_fs $network $syslog</span><br />
<span style="color: #666666; font-style: italic;"># Required-Stop: &nbsp; &nbsp; $local_fs $network $syslog</span><br />
<span style="color: #666666; font-style: italic;"># Default-Start: &nbsp; &nbsp; 2 3 4 5</span><br />
<span style="color: #666666; font-style: italic;"># Default-Stop: &nbsp; &nbsp; &nbsp;0 1 6</span><br />
<span style="color: #666666; font-style: italic;"># Short-Description: Start daemon at boot time</span><br />
<span style="color: #666666; font-style: italic;"># Description: &nbsp; &nbsp; &nbsp; Enable service provided by funky-server.</span><br />
<span style="color: #666666; font-style: italic;">### END INIT INFO</span></div></td></tr></tbody></table></div>
<p>On ajoute notre module au système de démarrage.<br />
Sous RedHat &#038; CentOS</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">chkconfig <span style="color: #660033;">--add</span> funky-server.js</div></td></tr></tbody></table></div>
<p>Sous Debian &#038; Ubuntu</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">updaterc.d default funky-server.js</div></td></tr></tbody></table></div>
<h3>Pour aller plus loin</h3>
<p><img src="http://www.armetiz.info/files/2012/09/logo-developer-github.png" alt="" title="logo-developer-github" width="128" height="128" class="alignleft size-full wp-image-2781" /></a><a href="https://github.com/armetiz/node-simple-daemon">Simple-daemon</a> est un module NodeJS qui est le fork de <a href="https://github.com/frodwith/node-init">node-init</a>. A ce module il manquait une fonction synchrone pour lancer le processus et être parfaitement fonctionnel.<br />
En effet, basé sur <a href="https://github.com/indexzero/daemon.node">daemon.node</a> qui est un <strong>add-on C</strong> avec une restriction importante : &#8220;all daemonization should happen on the first <a href="http://howtonode.org/understanding-process-next-tick">tick</a> and not as part of an asynchronous action&#8221;.</p>
<p>Vous pouvez coupler cette solution à <a href="https://github.com/nodejitsu/forever">forever</a> pour que l&#8217;application survive à un crash impromptu.</p>
<p>Aussi,<br />
L&#8217;ouverture du serveur HTTP est une <strong>opération asynchrone</strong>, le changement d&#8217;utilisateur apparait après la demande d&#8217;écoute du serveur mais pas forcement après que le serveur soit sur écoute.<br />
Après lecture du <a href="https://github.com/joyent/node">code NodeJS</a> et de la <a href="https://github.com/joyent/libuv">libuv</a> concernant l&#8217;écoute d&#8217;un serveur HTTP, il me semble que la reservation du socket soit fait dans le même <a href="http://howtonode.org/understanding-process-next-tick">tick</a> que la fonction JS <strong>http.Server::listen()</strong>. Du moins, pour les systèmes Unix.<br />
Si quelqu&#8217;un est apte à me le confirmer, les commentaires sont là pour.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/node-js-mise-production-simple/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Apache 2.2 &#8211; Custom HTTP Header &amp; Redirect</title>
		<link>http://www.armetiz.info/apache-2-2-custom-http-header-redirect/</link>
		<comments>http://www.armetiz.info/apache-2-2-custom-http-header-redirect/#comments</comments>
		<pubDate>Fri, 24 Aug 2012 13:54:46 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Linux]]></category>
		<category><![CDATA[Apache]]></category>
		<category><![CDATA[Configuration]]></category>
		<category><![CDATA[HTTP]]></category>
		<category><![CDATA[HTTPS]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Pound]]></category>
		<category><![CDATA[rewrite]]></category>
		<category><![CDATA[Varnish]]></category>

		<guid isPermaLink="false">http://hosting.armetiz.info/armetiz/?p=2702</guid>
		<description><![CDATA[Derniérement j&#8217;ai eu besoin de fournir une ressource differente en fonction du protocole utilisé. Un fichier robots.txt pour autoriser l&#8217;indéxation sur HTTP et le refuser sur HTTPS. Le soucis, c&#8217;est.. <a href="http://www.armetiz.info/apache-2-2-custom-http-header-redirect/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>Derniérement j&#8217;ai eu besoin de fournir une ressource differente en fonction du protocole utilisé.<br />
Un fichier <strong>robots.txt</strong> pour autoriser l&#8217;indéxation sur <strong>HTTP</strong> et le refuser sur <strong>HTTPS</strong>.</p>
<p>Le soucis, c&#8217;est que notre serveur HTTP est derrière un reverse proxy HTTPS to HTTP (<a href="http://www.apsis.ch/pound">Pound</a>), et qu&#8217;en l&#8217;état le serveur HTTP n&#8217;a pas moyen de savoir si l&#8217;utilisateur a demandé une connexion SSL ou non.</p>
<p>Pour pouvoir réaliser ce besoin, nous injectons un header HTTP au niveau du reverse proxy Pound : <strong>X-Forwarded-Proto</strong> qui contient la valeur &#8220;https&#8221;</p>
<div class="codecolorer-container text blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="text codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">ListenHTTPS<br />
&nbsp; &nbsp; xHTTP 2<br />
&nbsp; &nbsp; Address 1.2.3.4<br />
&nbsp; &nbsp; Port &nbsp; &nbsp;443<br />
&nbsp; &nbsp; Cert &nbsp; &nbsp;&quot;/etc/ssl/certs/private/domain.tld.pem&quot;<br />
&nbsp; &nbsp; HeadRemove &quot;X-Forwarded-Proto&quot;<br />
&nbsp; &nbsp; AddHeader &quot;X-Forwarded-Proto: https&quot;<br />
End</div></td></tr></tbody></table></div>
<p><img src="http://www.armetiz.info/files/2012/08/apache_logo.png" alt="" title="apache_logo" width="150" height="149" class="alignleft size-full wp-image-2710" />Maintenant,<br />
Le serveur HTTP peut savoir si l&#8217;utilisateur a établit une connexion sécurisé ou non.<br />
Nous réalisons donc une ré-écriture d&#8217;URL en fonction de ce Custom HTTP Header.</p>
<div class="codecolorer-container text blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br /></div></td><td><div class="text codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">RewriteCond %{HTTP:X-Forwarded-Proto} ^https$<br />
RewriteCond %{REQUEST_URI} ^/robots.txt$<br />
RewriteRule ^(.*)$ /robots_https.txt [L]</div></td></tr></tbody></table></div>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/apache-2-2-custom-http-header-redirect/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Intégrité md5</title>
		<link>http://www.armetiz.info/integrite-md5/</link>
		<comments>http://www.armetiz.info/integrite-md5/#comments</comments>
		<pubDate>Fri, 03 Aug 2012 08:22:43 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Linux]]></category>
		<category><![CDATA[CentOS]]></category>
		<category><![CDATA[Debian]]></category>
		<category><![CDATA[Hash]]></category>
		<category><![CDATA[Intégrité]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[MD5]]></category>
		<category><![CDATA[Sécurité]]></category>
		<category><![CDATA[Serveur]]></category>

		<guid isPermaLink="false">http://www.armetiz.info/?p=2555</guid>
		<description><![CDATA[Pour vérifier l&#8217;intégrité de vos fichiers, il faut enregistrer leur état à un instant T et vérifier cet été à un instant T+1. Pour cela, le plus simple est de.. <a href="http://www.armetiz.info/integrite-md5/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>Pour vérifier l&#8217;intégrité de vos fichiers, il faut enregistrer leur état à un <strong>instant T</strong> et vérifier cet été à un <strong>instant T+1</strong>.<br />
Pour cela, le plus simple est de réaliser un hash de chacun des fichiers, et de vérifier ce hash régulièrement.</p>
<p>Récupérer un <a href="http://fr.wikipedia.org/wiki/MD5">hash md5</a> de l&#8217;ensemble des fichiers d&#8217;un répertoire. Il s&#8217;agit ici de la prise de référence.</p>
<div class="codecolorer-container text blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="text codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">find tld.domain.www/ -type f -print0 | xargs -0 md5sum &gt;&gt; tld.domain.www.md5</div></td></tr></tbody></table></div>
<p>Pour vérifier l&#8217;intégrité de vos fichiers par rapport à votre référence.</p>
<div class="codecolorer-container text blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="text codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">md5sum -c tld.domain.www.md5 | grep -v &quot;OK&quot;</div></td></tr></tbody></table></div>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/integrite-md5/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Vérification de la configuration Varnish</title>
		<link>http://www.armetiz.info/varnish-test-configuration/</link>
		<comments>http://www.armetiz.info/varnish-test-configuration/#comments</comments>
		<pubDate>Mon, 30 Jul 2012 13:30:51 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Linux]]></category>
		<category><![CDATA[cdn]]></category>
		<category><![CDATA[Configuration]]></category>
		<category><![CDATA[HTTP]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[memo]]></category>
		<category><![CDATA[unix]]></category>
		<category><![CDATA[Varnish]]></category>

		<guid isPermaLink="false">http://armetiz.info/?p=2625</guid>
		<description><![CDATA[Avant de redémarrer votre daemon Varnish pour prendre en compte la nouvelle configuration, vous pouvez tester le fichier de configuration. 1varnishd -C -f /etc/varnish/default.vcl L&#8217;option -C permet d&#8217;afficher le code.. <a href="http://www.armetiz.info/varnish-test-configuration/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>Avant de redémarrer votre <a href="http://fr.wikipedia.org/wiki/Daemon_(informatique)">daemon</a> Varnish pour prendre en compte la nouvelle configuration, vous pouvez tester le fichier de configuration.</p>
<div class="codecolorer-container text blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="text codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">varnishd -C -f /etc/varnish/default.vcl</div></td></tr></tbody></table></div>
<p>L&#8217;option <strong>-C</strong> permet d&#8217;afficher le code <a href="https://www.varnish-cache.org/docs/3.0/reference/vcl.html">VCL</a> compilé en C. Et l&#8217;option <strong>-f</strong> permet de sélectionner le fichier de configuration VCL à compiler.<br />
Avec cette commande, vous pourrez avoir la ligne contenant l&#8217;erreur.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/varnish-test-configuration/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Livre &#8211; Javascript: The Good Parts</title>
		<link>http://www.armetiz.info/javascript-the-good-parts/</link>
		<comments>http://www.armetiz.info/javascript-the-good-parts/#comments</comments>
		<pubDate>Mon, 02 Jul 2012 06:05:28 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Livres]]></category>
		<category><![CDATA[Application]]></category>
		<category><![CDATA[Best Practices]]></category>
		<category><![CDATA[Conseils]]></category>
		<category><![CDATA[Formation]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Serveur]]></category>

		<guid isPermaLink="false">http://www.armetiz.info/?p=2542</guid>
		<description><![CDATA[JavaScript: The good Parts de Douglas Crockford. Voici un livre interessant à lire et que je vous conseille. Les 140 pages qui le composent en font ouvrage concis. Il s&#8217;agit.. <a href="http://www.armetiz.info/javascript-the-good-parts/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.amazon.fr/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742">JavaScript: The good Parts</a> de <strong><a href="http://www.crockford.com/">Douglas Crockford</a></strong>.<br />
<strong>Voici un livre interessant à lire et que je vous conseille.</strong></p>
<p>Les 140 pages qui le composent en font ouvrage concis. Il s&#8217;agit à mon avis d&#8217;un livre à lire pour tout ceux qui souhaitent faire du Javascript de <strong>qualité</strong> ou qui souhaite aller plus loin.</p>
<p>La majeur partie du livre traite des <strong>fondements du langage</strong> en s&#8217;appuyant sur les bonnes pratiques. Les defaults de Javascript sont montrés du doigt dans les deux premieres Annexes.</p>
<p>Voici les différents chapitres :<br />
<img class="alignright size-full wp-image-2543" src="http://www.armetiz.info/files/2012/06/javascript_the_good_parts1.gif" alt="" width="182" height="240" /></p>
<ul>
<li>Good Parts</li>
<li>Grammar</li>
<li><strong>Objects</strong></li>
<li><strong>Functions</strong></li>
<li><strong>Inheritance</strong></li>
<li>Arrays</li>
<li>Regular Expressions</li>
<li>Methods</li>
<li>Style</li>
<li><strong>Beautiful Features</strong></li>
<li><strong>Appendix A. Awful Parts</strong></li>
<li><strong>Appendix B. Bas Parts</strong></li>
<li>Appendix C. JSLint</li>
<li>Appendix D. Syntax Diagrams</li>
<li>Appendix E. JSON</li>
</ul>
<p>Pour tout ceux qui souhaitent faire du <a href="http://www.armetiz.info/livre-node-up-and-running/">NodeJS</a> ou des applications fullstack JS coté client, vous devriez sérieusement penser à acheter ce livre.</p>
<p>Voici une phrase que j&#8217;ai aimé et qui est tiré de la fin du chapitre &#8220;<em>Beautiful Features</em>&#8221;</p>
<blockquote><p>It would be nice if products and programming languages were designed to have only good parts.</p></blockquote>
<p>Juste avant cela il prends la métaphore de nos micro-ondes qui ont pleins de boutons et de fonctionnalités. Au final, on ne se sert que du bouton &#8220;Start&#8221; et de l&#8217;horloge en piochant dans le réfrigérateur. De plus, qui n&#8217;a jamais passer trop de temps à régler l&#8217;heure de cet appareil.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/javascript-the-good-parts/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Livre &#8211; Node Up and Running</title>
		<link>http://www.armetiz.info/livre-node-up-and-running/</link>
		<comments>http://www.armetiz.info/livre-node-up-and-running/#comments</comments>
		<pubDate>Thu, 21 Jun 2012 06:16:13 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Livres]]></category>
		<category><![CDATA[Asynchrone]]></category>
		<category><![CDATA[Découverte]]></category>
		<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Livre]]></category>
		<category><![CDATA[NodeJS]]></category>
		<category><![CDATA[Server]]></category>
		<category><![CDATA[Serveur]]></category>

		<guid isPermaLink="false">http://www.armetiz.info/?p=2525</guid>
		<description><![CDATA[Node &#8211; Up and Running est un livre sur NodeJS écrit par Tom Hughes-Croucher &#38; Mike Wilson. Ecrit en Anglais, il vous permettra de mettre le pied à l&#8217;étrier de.. <a href="http://www.armetiz.info/livre-node-up-and-running/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p><a href="http://nodejs.org/"><img src="http://www.armetiz.info/files/2012/06/nodejs1.gif" alt="nodejs" width="180" height="236" class="alignleft size-full wp-image-2527" /></a><a href="http://www.amazon.fr/Node-Up-Running-Tom-Hughes-Croucher/dp/1449398588/">Node &#8211; Up and Running</a> est un livre sur <a href="http://nodejs.org/">NodeJS</a> écrit par <em>Tom Hughes-Croucher</em> &amp; <em>Mike Wilson</em>.</p>
<p>Ecrit en Anglais, il vous permettra de mettre le pied à l&#8217;étrier de <strong>NodeJS avec facilité</strong>.<br />
Les 170 pages sont consacrées à la découverte et à la prise en main de NodeJS, ainsi qu&#8217;aux problématiques qu&#8217;il tente de résoudre par son approche &#8220;Even-Driven&#8221;.</p>
<p>
Personnellement, j&#8217;ai vraiment apprécié cet ouvrage. J&#8217;avais déjà envie de travailler avec NodeJS, et bien cela est confirmé !</p>
<p>Voici les chapitres du livre:</p>
<ul>
<li>A Very Brief Introduction to Node.js</li>
<li>Doing Interesting Things</li>
<li>Building Robust Node Applications</li>
<li>Core APIs</li>
<li>Helper APIs</li>
<li>Data Access</li>
<li>Important External Modules</li>
<li>Extending Node</li>
</ul>
<p>Il est à noter que l&#8217;exploration de la <a href="http://nodejs.org/api/">documentation API</a> est quasiment obligatoire une fois que vous avez terminé le livre. Cela vous permettra d&#8217;aller plus loin dans votre découverte et d&#8217;avoir toutes les clés en main.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/livre-node-up-and-running/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>CentOS – Installer le module h264 streaming pour Lighttpd</title>
		<link>http://www.armetiz.info/centos-install-module-h264-streaming-lighttpd/</link>
		<comments>http://www.armetiz.info/centos-install-module-h264-streaming-lighttpd/#comments</comments>
		<pubDate>Tue, 12 Jun 2012 10:20:48 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Linux]]></category>
		<category><![CDATA[CentOS]]></category>
		<category><![CDATA[Compilation]]></category>
		<category><![CDATA[Debian]]></category>
		<category><![CDATA[h264]]></category>
		<category><![CDATA[HTTP]]></category>
		<category><![CDATA[Installation]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[Lighttpd]]></category>
		<category><![CDATA[Serveur]]></category>
		<category><![CDATA[Streaming]]></category>
		<category><![CDATA[Video]]></category>

		<guid isPermaLink="false">http://www.armetiz.info/?p=2505</guid>
		<description><![CDATA[Nous allons commencer avec l&#8217;installation de lighttpd. Personnellement, j&#8217;utilise les repository EPEL pour le faire. 1yum install lighttpd Installation des outils et des headers. 1yum install automake autoconf libtool bzip2-devel.. <a href="http://www.armetiz.info/centos-install-module-h264-streaming-lighttpd/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p>Nous allons commencer avec l&#8217;installation de lighttpd. Personnellement, j&#8217;utilise les repository EPEL pour le faire.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">yum install</span> lighttpd</div></td></tr></tbody></table></div>
<p>Installation des outils et des headers.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">yum install</span> <span style="color: #c20cb9; font-weight: bold;">automake</span> <span style="color: #c20cb9; font-weight: bold;">autoconf</span> libtool bzip2-devel zlib-devel <span style="color: #c20cb9; font-weight: bold;">gcc</span> <span style="color: #c20cb9; font-weight: bold;">make</span> pcre-devel</div></td></tr></tbody></table></div>
<p><strong>Note</strong>: Avant de commencer, il est à noter que le lien donné par <a href="http://h264.code-shop.com/trac/wiki/Mod-H264-Streaming-Lighttpd-Version2">code-shop</a> pour la compilation du module h264 avec Lighttpd 1.4.x ne contient pas les fichiers nécessaires à la compilation du module.<br />
Voici donc la version que j&#8217;avais utilisé pour la compilation sous <a href="http://www.armetiz.info/debian-install-module-h264-streaming-lighttpd/">Debian avec Lighttpd 1.4.19</a>. Cela fonctionne parfaitement sous <strong>CentOS6</strong> avec <strong>Lighttpd 1.4.28</strong>. </p>
<p>Download de <a href="http://armetiz.info/wp-content/uploads/2012/06/lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar1.gz">lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar.gz</a></p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<br />
curl <span style="color: #660033;">-o</span> <span style="color: #ff0000;">&quot;lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar.gz&quot;</span> http:<span style="color: #000000; font-weight: bold;">//</span>armetiz.info<span style="color: #000000; font-weight: bold;">/</span>wp-content<span style="color: #000000; font-weight: bold;">/</span>uploads<span style="color: #000000; font-weight: bold;">/</span><span style="color: #000000;">2012</span><span style="color: #000000; font-weight: bold;">/</span>06<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar1.gz<br />
<span style="color: #c20cb9; font-weight: bold;">tar</span> <span style="color: #660033;">-xzvf</span> lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar.gz</div></td></tr></tbody></table></div>
<p>Ensuite, nous allons telecharger les sources correspondant à la version précedement installé de Lighttpd.<br />
Actuellement, sous CentOS 6 avec EPEL, il s&#8217;agit de Lighttp 1.4.28</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<br />
curl <span style="color: #660033;">-o</span> <span style="color: #ff0000;">&quot;lighttpd-1.4.28.tar.gz&quot;</span> http:<span style="color: #000000; font-weight: bold;">//</span>download.lighttpd.net<span style="color: #000000; font-weight: bold;">/</span>lighttpd<span style="color: #000000; font-weight: bold;">/</span>releases-<span style="color: #000000;">1.4</span>.x<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.28.tar.gz<br />
<span style="color: #c20cb9; font-weight: bold;">tar</span> <span style="color: #660033;">-xzvf</span> lighttpd-1.4.28.tar.gz</div></td></tr></tbody></table></div>
<p>Copie des modules h264 dans les sources de la 1.4.28</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.18<span style="color: #000000; font-weight: bold;">/</span>src<span style="color: #000000; font-weight: bold;">/</span><br />
<span style="color: #c20cb9; font-weight: bold;">cp</span> mod_h264_streaming.c mod_streaming_export.h moov.<span style="color: #000000; font-weight: bold;">*</span> mp4_io.<span style="color: #000000; font-weight: bold;">*</span> mp4_process.<span style="color: #000000; font-weight: bold;">*</span> mp4_reader.<span style="color: #000000; font-weight: bold;">*</span> mp4_writer.<span style="color: #000000; font-weight: bold;">*</span> output_bucket.<span style="color: #000000; font-weight: bold;">*</span> output_mp4.<span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.28<span style="color: #000000; font-weight: bold;">/</span>src<span style="color: #000000; font-weight: bold;">/</span></div></td></tr></tbody></table></div>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.28<span style="color: #000000; font-weight: bold;">/</span>src<span style="color: #000000; font-weight: bold;">/</span><br />
<span style="color: #c20cb9; font-weight: bold;">vim</span> Makefile.am</div></td></tr></tbody></table></div>
<p>Vous pouvez rajouter les lignes suivantes après la définition du module <strong>mod_flv_streaming</strong>.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">lib_LTLIBRARIES += mod_h264_streaming.la<br />
mod_h264_streaming_la_SOURCES = mod_h264_streaming.c \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mod_streaming_export.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; moov.c moov.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mp4_io.c mp4_io.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mp4_reader.c mp4_reader.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mp4_writer.c mp4_writer.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mp4_process.c mp4_process.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output_bucket.c output_bucket.h \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output_mp4.c output_mp4.h<br />
mod_h264_streaming_la_CFLAGS = $<span style="color: #7a0874; font-weight: bold;">&#40;</span>AM_CFLAGS<span style="color: #7a0874; font-weight: bold;">&#41;</span> -DBUILDING_H264_STREAMING<br />
mod_h264_streaming_la_LDFLAGS = <span style="color: #660033;">-module</span> <span style="color: #660033;">-export-dynamic</span> <span style="color: #660033;">-avoid-version</span> <span style="color: #660033;">-no-undefined</span><br />
mod_h264_streaming_la_LIBADD = $<span style="color: #7a0874; font-weight: bold;">&#40;</span>common_libadd<span style="color: #7a0874; font-weight: bold;">&#41;</span></div></td></tr></tbody></table></div>
<p>On va s&#8217;occuper de la compilation</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>lighttpd-1.4.28<span style="color: #000000; font-weight: bold;">/</span><br />
.<span style="color: #000000; font-weight: bold;">/</span>autogen.sh<br />
.<span style="color: #000000; font-weight: bold;">/</span>configure <span style="color: #660033;">--prefix</span>=<span style="color: #000000; font-weight: bold;">/</span>opt<span style="color: #000000; font-weight: bold;">/</span>lighttpd<br />
<span style="color: #c20cb9; font-weight: bold;">make</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #c20cb9; font-weight: bold;">make</span> <span style="color: #c20cb9; font-weight: bold;">install</span></div></td></tr></tbody></table></div>
<p>On va maintenant récupérer le .so que l&#8217;on vient de compiler et correspondant au module h264.</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>opt<span style="color: #000000; font-weight: bold;">/</span>lighttpd<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span><br />
<span style="color: #c20cb9; font-weight: bold;">cp</span> mod_h264_streaming.so <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib64<span style="color: #000000; font-weight: bold;">/</span>lighttpd<span style="color: #000000; font-weight: bold;">/</span></div></td></tr></tbody></table></div>
<p>Alors que les étapes spécifiques aux binaires sont terminés,<br />
Voici la partie configuration : <strong>/etc/lighttpd/conf.d/h264.conf</strong></p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;">## /etc/lighttpd/conf.d/h264.conf</span><br />
<span style="color: #666666; font-style: italic;">#######################################################################</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<span style="color: #666666; font-style: italic;">## &nbsp;H264 Module </span><br />
<span style="color: #666666; font-style: italic;">## --------------- </span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<span style="color: #666666; font-style: italic;">## see http://h264.code-shop.com/trac/wiki/Mod-H264-Streaming-Lighttpd-Version2</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<br />
server.modules += <span style="color: #7a0874; font-weight: bold;">&#40;</span> <span style="color: #ff0000;">&quot;mod_h264_streaming&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#41;</span><br />
<br />
h264-streaming.extensions = <span style="color: #7a0874; font-weight: bold;">&#40;</span> <span style="color: #ff0000;">&quot;.mp4&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#41;</span><br />
<span style="color: #666666; font-style: italic;">#######################################################################</span></div></td></tr></tbody></table></div>
<p>Dans le fichier <strong>/etc/lighttpd/modules.conf</strong>, nous allons ajouter le chargement du fichier de configuration précédemment créé.</p>
<p>Apres le scope concernant <strong>server.modules</strong>, nous ajoutons</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;">## /etc/lighttpd/modules.conf</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<span style="color: #666666; font-style: italic;">## mod_h264_streaming</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
include <span style="color: #ff0000;">&quot;conf.d/h264.conf&quot;</span></div></td></tr></tbody></table></div>
<h3>Mise à jour</h3>
<p>Attention, lorsque vous allez mettre à jour vos paquets via &#8220;<strong>yum update</strong>&#8220;, il est fort probable d&#8217;obtenir l&#8217;erreur suivante lors du démarrage de lighttpd.</p>
<blockquote><p>
(plugin.c.421) plugin-version doesn&#8217;t match lighttpd-version for h264_streaming<br />
(server.c.926) Initialization of plugins failed. Going down.
</p></blockquote>
<p>En gros, le <strong>module h264</strong> que vous avez compiler n&#8217;est plus valide pour la nouvelle version de <strong>lighttpd</strong> que vous avez récupéré suite à une mise à jour.</p>
<p>Dans un premier temps, désactiver le module h264 afin de pouvoir lancer lighttpd correctement :</p>
<div class="codecolorer-container bash blackboard" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;font: normal 12px/1.4em Monaco, Lucida Console, monospace;"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap"><span style="color: #666666; font-style: italic;">## /etc/lighttpd/modules.conf</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<span style="color: #666666; font-style: italic;">## mod_h264_streaming</span><br />
<span style="color: #666666; font-style: italic;">##</span><br />
<span style="color: #666666; font-style: italic;">#include &quot;conf.d/h264.conf&quot;</span></div></td></tr></tbody></table></div>
<p>Une fois fait, vous pouvez démarrer <strong>lighttpd</strong> tranquillement et recommencer la compilation du <strong>module h264</strong>.<br />
Pour cela, rien de plus simple: reprenez le tutoriel à son début en prenant soin de récuperer les sources de lighttpd correspondant à la version installée.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/centos-install-module-h264-streaming-lighttpd/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Livre &#8211; MongoDB in Action</title>
		<link>http://www.armetiz.info/livre-mongodb-in-action/</link>
		<comments>http://www.armetiz.info/livre-mongodb-in-action/#comments</comments>
		<pubDate>Fri, 16 Mar 2012 10:38:14 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Livres]]></category>
		<category><![CDATA[Databases]]></category>
		<category><![CDATA[Découverte]]></category>
		<category><![CDATA[Doctrine]]></category>
		<category><![CDATA[Driver]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[Libre]]></category>
		<category><![CDATA[MongoDB]]></category>
		<category><![CDATA[MySQL]]></category>
		<category><![CDATA[PHP]]></category>
		<category><![CDATA[RDBMS]]></category>
		<category><![CDATA[SGBDR]]></category>
		<category><![CDATA[SQL]]></category>
		<category><![CDATA[Transaction]]></category>

		<guid isPermaLink="false">http://www.armetiz.info/?p=2275</guid>
		<description><![CDATA[Je souhaitais approfondir MongoDB depuis un petit moment déjà. Et bien qu&#8217;il y ai suffisamment de ressource sur le site officiel, la lecture d&#8217;un ouvrage papier a toujours été pour.. <a href="http://www.armetiz.info/livre-mongodb-in-action/" class="readmore">read more</a>]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.amazon.fr/MongoDB-Action-Kyle-Banker/dp/1935182870"><img src="http://www.armetiz.info/files/2012/03/mongodb-in-action1.png" alt="mongodb-in-action" width="150" height="188" class="size-full wp-image-2277 alignright" /></a>Je souhaitais approfondir <strong><a href="http://www.mongodb.org/">MongoDB</a></strong> depuis un petit moment déjà. Et bien qu&#8217;il y ai suffisamment de ressource sur le site officiel, la lecture d&#8217;un ouvrage papier a toujours été pour moi un luxe lors des <a href="http://www.armetiz.info/category/livres/">mes découvertes techniques</a>. </p>
<h3>MongoDB</h3>
<p>Pour commencer,<br />
C&#8217;est un serveur de base de donnée <strong>NoSQL</strong> stockant les données sous forme de <strong>Document</strong>.<br />
Contrairement à d&#8217;autres serveurs NoSQL comme Redis qui ne permet un acces aux données que par une clé unique, MongoDB permet d&#8217;acceder à un ou plusieurs Document via un <strong>système de requête</strong> pouvant utiliser des <strong>indexes</strong>.<br />
MongoDB c&#8217;est aussi un déploiement <strong>Haute Disponibilité</strong> simplifié par la Réplication, une répartition des données &#8211; <strong>Sharding</strong> &#8211; possible pour les projets d&#8217;envergures, du <strong>Map/Reduce</strong> et du stockage de fichier via <strong>GridFS</strong>.<br />
Bref, c&#8217;est une mine d&#8217;or pour les technophiles.</p>
<h3>Le livre</h3>
<p>Ce livre s&#8217;adresse à ceux souhaitant découvrir MongoDB, voici les différents chapitres</p>
<ul>
<li>A database for the modern web</li>
<li>MongoDB through the JavaScript shell</li>
<li>Writting programs using MongoDB</li>
<li><strong>Document-oriented data</strong></li>
<li><strong>Queries</strong> and aggregation</li>
<li><strong>Updates, atomic operations</strong>, and deletes</li>
<li>Indexing and query optimization</li>
<li><strong>Replication</strong></li>
<li>Sharding</li>
<li>Deployment and administration</li>
</ul>
<p>Il s&#8217;agit d&#8217;un <strong>ouvrage écrit en Anglais</strong> dans un registre légèrement plus soutenu que les autres livres techniques Anglais. Heureusement il ne s&#8217;agit pas d&#8217;un roman, on comprends donc assez facilement les messages que souhaite faire passer l&#8217;auteur.</p>
<p><a href="http://www.mongodb.org/"><img src="http://www.armetiz.info/files/2012/03/mongodb-115x1151.jpg" alt="mongodb" width="115" height="115" class="size-full wp-image-2286 alignleft" /></a>Dès les 50 premieres pages, j&#8217;ai été <strong>convaincu</strong> par cette &#8220;nouvelle&#8221; technologie !<br />
J&#8217;avais énormément de question sur la structure d&#8217;un projet MongoDB et la migration depuis un SGBDR.<br />
C&#8217;est là que les exemples sont très parlant et illustrent les problématiques qu&#8217;un développeur rencontra à coups sûr. On trouve réponse à de nombreuses questions concernant la conception d&#8217;un projet avec MongoDB.</p>
<p>La partie qui m&#8217;a un peu déçu concerne le<strong> Sharding sous MongoDB</strong>.<br />
Je m&#8217;attendais à une fonctionnalité simple à mettre en place alors qu&#8217;en fait, cela implique quelques contraintes sur les indexes, et alourdit de maniere significative l&#8217;administration.<br />
Au final, c&#8217;est moi qui avait un mauvais jugement, le Sharding étant une fonctionnalité tellement excellente pour les entreprises disposant d&#8217;un jeux de données colossale qu&#8217;il ne fallait pas s&#8217;attendre à une simple commande CLI. <em>De grands pouvoirs impliquent de grandes responsabilités !</em> </p>
<h3>Pour conclure</h3>
<p><strong>MongoDB</strong> a un avenir plus que certain au sein de nos SI. Il manque encore un peu de <strong>maturité</strong> à ce projet pour qu&#8217;il puisse s&#8217;imposer face à MySQL. Mais un jour on utilisera les <strong>SGBDR</strong> uniquement lorsque l&#8217;on aura des contraintes liées aux transactions ou à une propriété dédiée des nos SGBRD.</p>
<h3>Pour aller un peu plus loin</h3>
<p><a href="http://www.doctrine-project.org/"><img src="http://www.armetiz.info/files/2012/03/doctrine1.png" alt="doctrine" width="191" height="53" class="size-full wp-image-2285 alignright" /></a><br />
Si vous êtes développeur PHP, je vous recommande fortement la lecture du projet <a href="http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/">Doctrine MongoDB ODM</a>.<br />
Mon point de vue est qu&#8217;il s&#8217;agit d&#8217;un must have sur les projets MongoDB.<br />
Sans parler de la possibilité de faire du <strong>mapping vers des POJO</strong>, MongoDB ODM permet d&#8217;assembler deux collections liés par des références, et je vous laisse découvrir l&#8217;intérêt du <a href="http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/priming-references.html">priming</a> qui ne vous laissera surement pas de marbre.</p>
<p>Commander le livre sur <a href="http://www.amazon.fr/MongoDB-Action-Kyle-Banker/dp/1935182870">Amazon</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.armetiz.info/livre-mongodb-in-action/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
	</channel>
</rss>

<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using apc
Database Caching 8/17 queries in 0.020 seconds using apc
Object Caching 1963/2003 objects using apc

 Served from: www.armetiz.info @ 2015-07-01 11:08:12 by W3 Total Cache -->
